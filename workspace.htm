<html>
    <script>
        function main(){
            return new Promise(
                function(resolve, reject){
                    try{
                        var fn = function() {
                            console.log("downloading event...");
                            //throw new Error("downloading buffering"); 
                            resolve();
                        }
                        setTimeout(fn, 1000);
                    }
                    catch {
                        reject();
                    }
                }
            )
        }

        async function realMain() {
            try {
                await main();
                console.log("re-started downloading...\ncompleted download");
            }
            catch {
                console.log("download failed. please try again.");
            }
            console.log("el fin");

            /*
            var a = main();
            
            a.then( () => console.log("Re-started downloading...\ncompleted downloading"))
              .catch( () => console.log("stopped downloading"));
            */
        }

        realMain();
    </script>
</html>